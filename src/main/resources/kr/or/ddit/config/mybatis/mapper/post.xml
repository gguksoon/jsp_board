<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="post">

	<select id="getPostPagingList" parameterType="map" resultType="map">
	    select a.*
  		  from (select rownum rn, a.*
                  from (select postSeq, parentSeq, userId, postContent, postRegDate, postModDate, lpad(' ', (level-1)*4, ' ') || postNm postNm, postStatus, postGn, level
                          from gs_post
                         where boardSeq = #{boardSeq} 
                         start with parentSeq is null
                       connect by prior postSeq = parentSeq
                         order siblings by postGn desc, postSeq) a) a
         where rn between (#{pagesize} * (#{page} - 1) + 1) and (#{pagesize} * #{page})
	</select>
	
	<select id="getPostTotalCnt" parameterType="String" resultType="int">
		select count(*)
		  from gs_post
		 where boardSeq = #{boardSeq}
	</select>
</mapper>